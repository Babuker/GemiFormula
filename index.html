<!DOCTYPE html>
<html lang="en" id="mainHtml">
<head>
    <meta charset="UTF-8">
    <title>GemiFormula – Smart Formulation Engine</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="style.css">

    <!-- Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>

<body>

<div class="container">

<header>
    <h1>GemiFormula – Smart Formulation Engine</h1>
</header>

<!-- INPUTS -->
<section class="card input-grid">

    <div class="field">
        <label>Dosage Form</label>
        <select id="dosageForm">
            <option value="tablet">Tablet</option>
            <option value="capsule">Capsule</option>
        </select>
    </div>

    <div class="field">
        <label>API</label>
        <select id="apiSelect">
            <option value="Paracetamol">Paracetamol</option>
            <option value="Ibuprofen">Ibuprofen</option>
        </select>
    </div>

    <div class="field">
        <label>API Amount per Unit (mg)</label>
        <input type="number" id="apiDose" value="500">
    </div>

    <div class="field">
        <label>Formulation Strategy</label>
        <select id="strategy">
            <option value="cost">Cost-wise</option>
            <option value="balanced" selected>Balanced</option>
            <option value="quality">Quality-wise</option>
        </select>
    </div>

    <div class="field">
        <label>Batch Size (units)</label>
        <input type="number" id="batchSize" value="10000">
    </div>

    <button class="btn-main" onclick="runFormulation()">Generate Results</button>

</section>

<!-- RESULTS -->
<div id="resultsArea" style="display:none;">

    <!-- 1️⃣ FORMULA TABLE + PIE -->
    <section class="card">
        <h3>Formulation Composition</h3>

        <div class="formula-layout">

            <table>
                <thead>
                    <tr>
                        <th>Component</th>
                        <th>Quantity (mg)</th>
                        <th>Role</th>
                        <th>Ratio (%)</th>
                    </tr>
                </thead>
                <tbody id="formulaTable"></tbody>
            </table>

            <canvas id="formulaChart"></canvas>

        </div>
    </section>

    <!-- 2️⃣ ONE-LINE BATCH -->
    <section class="card compact-line">
        <strong>Batch:</strong>
        <span id="batchLine"></span>
    </section>

    <!-- 3️⃣ ONE-LINE RECOMMENDATION -->
    <section class="card compact-line">
        <strong>Recommendation:</strong>
        <span id="recLine"></span>
    </section>

    <!-- 4️⃣ PDF -->
    <section class="card">
        <button class="btn-pdf" onclick="exportPDF()">Download Results (PDF)</button>
    </section>

</div>

</div>

<script src="script.js"></script>
</body>
</html>
